<VirtualHost *:80>
    ServerName omeusitio.lan
    ServerAlias www.omeusitio.lan
    
    DocumentRoot /opt/web/omeusitio.lan/htdocs

    DirectoryIndex index.html

    <Directory /opt/web/omeusitio.lan/htdocs>
        Options Indexes FollowSymLinks
        AllowOverride AuthConfig FileInfo
    </Directory>

    <Location /secure>
        <RequireAll>
            Require not ip 172.16.0.0/16
            Require all granted
            Require not host *.apache.lan
        </RequireAll>
    </Location>

    CustomLog ${APACHE_LOG_DIR}/omeusitio.lan/acceso.log "IP:%a Hora:%t Bytes Recibidos:%I Tam Resposta:%O Time:%T Status:%s User Remoto:%u %r %{User-agent}i"
    ErrorDocument 404 /errors/nonexiste.html
    ErrorDocument 403 /errors/accesoprohibido.html
    
</VirtualHost>

<VirtualHost *:443>
    ServerName omeusitio.lan
    ServerAlias www.omeusitio.lan
    
    SSLEngine on
    SSLCertificateFile "/certificados/omeusitio.pem"
    SSLCertificateKeyFile "/certificados/omeusitio.key"    

    DocumentRoot /opt/web/omeusitio.lan/htdocs

    DirectoryIndex index.html

    <Directory /opt/web/omeusitio.lan/htdocs>
        Options Indexes FollowSymLinks
        AllowOverride AuthConfig FileInfo
    </Directory>

    <Location /secure>
        <RequireAll>
            Require not ip 172.16.0.0/16
            Require all granted
            Require not host *.apache.lan
        </RequireAll>
    </Location>

</VirtualHost>